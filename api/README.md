# Georgian Budget Data API

Cloud-native FastAPI backend that fetches and serves real-time Georgian government budget data directly from GitHub repository.

## Features

- 🚀 **Fast API** with automatic documentation
- 🌐 **GitHub Integration** - Fetches latest data from repository
- 📊 **Budget Data Access** with filtering and pagination
- 🔍 **Search** departments by name
- 📈 **Trends Analysis** for individual departments
- 📅 **Year Summaries** with top departments
- 🔧 **Data Validation** with Pydantic models
- ☁️ **Cloud Native** - Deploy anywhere, data always fresh

## Quick Start

### 1. Install Dependencies

```bash
cd api
pip install -r requirements.txt
```

### 2. Run the Server

```bash
# Development server
uvicorn main:app --reload --host 0.0.0.0 --port 8000

# Or simply
python main.py
```

### 3. Access the API

- **API Documentation**: http://localhost:8000/docs
- **Alternative Docs**: http://localhost:8000/redoc
- **Health Check**: http://localhost:8000/health

### 4. Data Source

The API automatically fetches the latest budget data from:
- **GitHub Repository**: https://github.com/zelima/money-flow
- **Data URL**: https://raw.githubusercontent.com/zelima/money-flow/main/data/processed/georgian_budget.csv
- **Auto-Update**: Data refreshes when the automated pipeline commits new data

## API Endpoints

### Core Endpoints

| Endpoint | Method | Description |
|----------|--------|-------------|
| `/` | GET | API information |
| `/health` | GET | Health check |
| `/budget` | GET | Get budget data with filters |
| `/summary` | GET | Overall data summary |
| `/departments` | GET | List all departments |

### Analysis Endpoints

| Endpoint | Method | Description |
|----------|--------|-------------|
| `/trends/{department}` | GET | Budget trend for specific department |
| `/years/{year}` | GET | Budget summary for specific year |
| `/search` | GET | Search departments by name |

### Budget Data Filters

The `/budget` endpoint supports these query parameters:

- `year`: Filter by specific year
- `department`: Filter by department name (partial match)
- `min_budget`: Minimum budget amount
- `max_budget`: Maximum budget amount
- `limit`: Number of results (max 1000)
- `offset`: Pagination offset

### Example Requests

```bash
# Get all budget data (first 100 records)
curl "http://localhost:8000/budget"

# Get budget data for 2020
curl "http://localhost:8000/budget?year=2020"

# Search for education-related departments
curl "http://localhost:8000/budget?department=განათლება"

# Get budget trend for a specific department
curl "http://localhost:8000/trends/საერთო"

# Get budget summary for 2019
curl "http://localhost:8000/years/2019"

# Search departments
curl "http://localhost:8000/search?q=მიწო"
```

## Data Models

### BudgetRecord
- `year`: Budget year (int)
- `budget`: Budget amount in millions GEL (float)
- `name`: Department/ministry name (str)

### DepartmentTrend
- `department`: Department name
- `years`: List of years
- `budgets`: List of budget amounts
- `total_budget`: Sum of all budgets
- `avg_budget`: Average budget
- `growth_rate`: Annual growth rate percentage

## Error Handling

The API returns proper HTTP status codes:
- `200`: Success
- `404`: Resource not found
- `422`: Validation error
- `500`: Server error

## CORS

CORS is enabled for all origins in development. Update `main.py` for production deployment.

## Data Source

The API serves data from `../data/processed/georgian_budget.csv` generated by the data pipeline. 